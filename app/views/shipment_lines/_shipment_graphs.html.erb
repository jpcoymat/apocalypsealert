<style type="text/css">
   body {
      margin: 0;
    }
    .sigmacontainer {
      position: relative;
      width: 50%;
      height: 10%;
    }
</style>
 <% @graphs.each do |graph| %>
  <div id="<%= graph.graph_id%>" class="sigmacontainer"></div>
  <script type="text/javascript">

  var <%= graph.graph_id %>= {nodes: [], edges: []};
   
  <% x_pos = 10.0 %>
  <% max_length = 100.0 %>
  <% dx = max_length/(graph.nodes.count - 1) %>
    // Then, let's add some data to display:
  <% graph.nodes.each do |node| %>
    <%= graph.graph_id %>.nodes.push({
        id: '<%= node.node_id %>',
        label: '<%= node.node_label %>',
        size: 1,
        color: '#734f4f',
        x: <%= x_pos %>,
        y: 10
    });
    <% x_pos += dx %>
  <% end %>

  <% graph.edges.each do |edge| %>
    <%= graph.graph_id %>.edges.push({
        id: '<%= edge.edge_id %>',
        source: '<%= edge.source %>',
        target: '<%= edge.target %>', 
        color: '<%= edge.color %>' 
    });
  <% end %>

  var <%= "s" + graph.graph_id %> = new sigma({graph: <%= graph.graph_id %>, container: '<%= graph.graph_id %>'});
    // Finally, let's ask our sigma instance to refresh:
  <%= "s" + graph.graph_id %>.refresh();
  </script>
  </div>
<% end %>
