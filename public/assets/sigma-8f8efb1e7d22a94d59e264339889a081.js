(function(){"use strict";var e={},t=function(i){var r,s,a,o,n;t.classes.dispatcher.extend(this);var l=this,d=i||{};if("string"==typeof d||d instanceof HTMLElement?d={renderers:[d]}:"[object Array]"===Object.prototype.toString.call(d)&&(d={renderers:d}),o=d.renderers||d.renderer||d.container,d.renderers&&0!==d.renderers.length||("string"==typeof o||o instanceof HTMLElement||"object"==typeof o&&"container"in o)&&(d.renderers=[o]),d.id){if(e[d.id])throw'sigma: Instance "'+d.id+'" already exists.';Object.defineProperty(this,"id",{value:d.id})}else{for(n=0;e[n];)n++;Object.defineProperty(this,"id",{value:""+n})}for(e[this.id]=this,this.settings=new t.classes.configurable(t.settings,d.settings||{}),Object.defineProperty(this,"graph",{value:new t.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),this._handler=function(e){var t,i={};for(t in e.data)i[t]=e.data[t];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),a=d.renderers||[],r=0,s=a.length;s>r;r++)this.addRenderer(a[r]);for(a=d.middlewares||[],r=0,s=a.length;s>r;r++)this.middlewares.push("string"==typeof a[r]?t.middlewares[a[r]]:a[r]);"object"==typeof d.graph&&d.graph&&(this.graph.read(d.graph),this.refresh()),window.addEventListener("resize",function(){l.settings&&l.refresh()})};if(t.prototype.addCamera=function(e){var i,r=this;if(!arguments.length){for(e=0;this.cameras[""+e];)e++;e=""+e}if(this.cameras[e])throw'sigma.addCamera: The camera "'+e+'" already exists.';return i=new t.classes.camera(e,this.graph,this.settings),this.cameras[e]=i,i.quadtree=new t.classes.quad,i.bind("coordinatesUpdated",function(){r.renderCamera(i,i.isAnimated)}),this.renderersPerCamera[e]=[],i},t.prototype.killCamera=function(e){if(e="string"==typeof e?this.cameras[e]:e,!e)throw"sigma.killCamera: The camera is undefined.";var t,i,r=this.renderersPerCamera[e.id];for(i=r.length,t=i-1;t>=0;t--)this.killRenderer(r[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},t.prototype.addRenderer=function(e){var i,r,s,a,o=e||{};if("string"==typeof o?o={container:document.getElementById(o)}:o instanceof HTMLElement&&(o={container:o}),"id"in o)i=o.id;else{for(i=0;this.renderers[""+i];)i++;i=""+i}if(this.renderers[i])throw'sigma.addRenderer: The renderer "'+i+'" already exists.';if(r="function"==typeof o.type?o.type:t.renderers[o.type],r=r||t.renderers.def,s="camera"in o?o.camera instanceof t.classes.camera?o.camera:this.cameras[o.camera]||this.addCamera(o.camera):this.addCamera(),this.cameras[s.id]!==s)throw"sigma.addRenderer: The camera is not properly referenced.";return a=new r(this.graph,s,this.settings,o),this.renderers[i]=a,Object.defineProperty(a,"id",{value:i}),a.bind&&a.bind(["click","clickStage","doubleClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],this._handler),this.renderersPerCamera[s.id].push(a),a},t.prototype.killRenderer=function(e){if(e="string"==typeof e?this.renderers[e]:e,!e)throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],i=t.indexOf(e);return i>=0&&t.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},t.prototype.refresh=function(){var e,i,r,s,a,o,n=0;for(s=this.middlewares||[],e=0,i=s.length;i>e;e++)s[e].call(this,0===e?"":"tmp"+n+":",e===i-1?"ready:":"tmp"+ ++n+":");for(r in this.cameras)a=this.cameras[r],a.settings("autoRescale")&&this.renderersPerCamera[a.id]&&this.renderersPerCamera[a.id].length?t.middlewares.rescale.call(this,s.length?"ready:":"",a.readPrefix,{width:this.renderersPerCamera[a.id][0].width,height:this.renderersPerCamera[a.id][0].height}):t.middlewares.copy.call(this,s.length?"ready:":"",a.readPrefix),o=t.utils.getBoundaries(this.graph,a.readPrefix),a.quadtree.index(this.graph.nodes(),{prefix:a.readPrefix,bounds:{x:o.minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}});for(s=Object.keys(this.renderers),e=0,i=s.length;i>e;e++)if(this.renderers[s[e]].process)if(this.settings("skipErrors"))try{this.renderers[s[e]].process()}catch(l){console.log('Warning: The renderer "'+s[e]+'" crashed on ".process()"')}else this.renderers[s[e]].process();return this.render(),this},t.prototype.render=function(){var e,t,i;for(i=Object.keys(this.renderers),e=0,t=i.length;t>e;e++)if(this.settings("skipErrors"))try{this.renderers[i[e]].render()}catch(r){this.settings("verbose")&&console.log('Warning: The renderer "'+i[e]+'" crashed on ".render()"')}else this.renderers[i[e]].render();return this},t.prototype.renderCamera=function(e,t){var i,r,s,a=this;if(t)for(s=this.renderersPerCamera[e.id],i=0,r=s.length;r>i;i++)if(this.settings("skipErrors"))try{s[i].render()}catch(o){this.settings("verbose")&&console.log('Warning: The renderer "'+s[i].id+'" crashed on ".render()"')}else s[i].render();else if(!this.cameraFrames[e.id]){for(s=this.renderersPerCamera[e.id],i=0,r=s.length;r>i;i++)if(this.settings("skipErrors"))try{s[i].render()}catch(o){this.settings("verbose")&&console.log('Warning: The renderer "'+s[i].id+'" crashed on ".render()"')}else s[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete a.cameraFrames[e.id]})}return this},t.prototype.kill=function(){var t;this.graph.kill(),delete this.middlewares;for(t in this.renderers)this.killRenderer(this.renderers[t]);for(t in this.cameras)this.killCamera(this.cameras[t]);delete this.renderers,delete this.cameras;for(t in this)this.hasOwnProperty(t)&&delete this[t];delete e[this.id]},t.instances=function(i){return arguments.length?e[i]:t.utils.extend({},e)},t.version="1.0.2","undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.sigma=t):this.sigma=t}).call(this),function(e){"use strict";function t(e,i){var r,s,a,o;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])t(e,arguments[0][e]);else if(arguments.length>1)for(o=Array.isArray(e)?e:e.split(/ /),r=0,s=o.length;r!==s;r+=1)a=o[r],M[a]||(M[a]=[]),M[a].push({handler:i})}function i(e,t){var i,r,s,a,o,n,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(i=0,r=l.length;i!==r;i+=1){if(n=l[i],M[n]){for(o=[],s=0,a=M[n].length;s!==a;s+=1)M[n][s].handler!==t&&o.push(M[n][s]);M[n]=o}M[n]&&0===M[n].length&&delete M[n]}else for(i=0,r=l.length;i!==r;i+=1)delete M[l[i]];else M=Object.create(null)}function r(e,t){var i,r,s,a,o,n,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,i=0,s=l.length;i!==s;i+=1)if(n=l[i],M[n])for(o={type:n,data:t||{}},r=0,a=M[n].length;r!==a;r+=1)try{M[n][r].handler(o)}catch(d){}}function s(){var e,t,i,r,s=!1,a=x(),o=A.shift();if(i=o.job(),a=x()-a,o.done++,o.time+=a,o.currentTime+=a,o.weightTime=o.currentTime/(o.weight||1),o.averageTime=o.time/o.done,r=o.count?o.count<=o.done:!i,!r){for(e=0,t=A.length;t>e;e++)if(A[e].weightTime>o.weightTime){A.splice(e,0,o),s=!0;break}s||A.push(o)}return r?o:null}function a(e){var t=A.length;w[e.id]=e,e.status="running",t&&(e.weightTime=A[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=x(),r("jobStarted",p(e)),A.push(e)}function o(){var e,t,i;for(e in E)t=E[e],t.after?T[e]=t:a(t),delete E[e];for(v=!!A.length;A.length&&x()-b<S.frameDuration;)if(i=s()){l(i.id);for(e in T)T[e].after===i.id&&(a(T[e]),delete T[e])}v?(b=x(),r("enterFrame"),setTimeout(o,0)):r("stop")}function n(e,t){var i,s,a;if(Array.isArray(e)){for(P=!0,i=0,s=e.length;s>i;i++)n(e[i].id,f(e[i],t));P=!1,v||(b=x(),r("start"),o())}else if("object"==typeof e)if("string"==typeof e.id)n(e.id,e);else{P=!0;for(i in e)"function"==typeof e[i]?n(i,f({job:e[i]},t)):n(i,f(e[i],t));P=!1,v||(b=x(),r("start"),o())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(h(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)a={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");a=f({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}E[e]=a,r("jobAdded",p(a)),v||P||(b=x(),r("start"),o())}return this}function l(e){var t,i,s,a,o=!1;if(Array.isArray(e))for(t=0,i=e.length;i>t;t++)l(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(s=[w,T,E],t=0,i=s.length;i>t;t++)e in s[t]&&(a=s[t][e],S.history&&(a.status="done",_.push(a)),r("jobEnded",p(a)),delete s[t][e],"function"==typeof a.end&&a.end(),o=!0);for(s=A,t=0,i=s.length;i>t;t++)if(s[t].id===e){s.splice(t,1);break}if(!o)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function d(){var e,t=f(E,w,T);if(S.history)for(e in t)t[e].status="done",_.push(t[e]),"function"==typeof t[e].end&&t[e].end();return E={},T={},w={},A=[],v=!1,this}function h(e){var t=E[e]||w[e]||T[e];return t?f(t):null}function c(){var e;if("string"==typeof a1&&1===arguments.length)return S[a1];e="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(e[a1]=a2);for(var t in e)void 0!==e[t]?S[t]=e[t]:delete S[t];return this}function g(){return v}function u(){return _=[],this}function m(e,t){var i,r,s,a,o,n,l;if(!arguments.length){o=[];for(r in E)o.push(E[r]);for(r in T)o.push(T[r]);for(r in w)o.push(w[r]);o=o.concat(_)}if("string"==typeof e)switch(e){case"waiting":o=y(T);break;case"running":o=y(w);break;case"done":o=_;break;default:n=e}if(e instanceof RegExp&&(n=e),!n&&("string"==typeof t||t instanceof RegExp)&&(n=t),n){if(l="string"==typeof n,o instanceof Array)i=o;else if("object"==typeof o){i=[];for(r in o)i=i.concat(o[r])}else{i=[];for(r in E)i.push(E[r]);for(r in T)i.push(T[r]);for(r in w)i.push(w[r]);i=i.concat(_)}for(o=[],s=0,a=i.length;a>s;s++)(l?i[s].id===n:i[s].id.match(n))&&o.push(i[s])}return p(o)}function f(){var e,t,i={},r=arguments.length;for(e=r-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function p(e){var t,i,r;if(!e)return e;if(Array.isArray(e))for(t=[],i=0,r=e.length;r>i;i++)t.push(p(e[i]));else if("object"==typeof e){t={};for(i in e)t[i]=p(e[i])}else t=e;return t}function y(e){var t,i=[];for(t in e)i.push(e[t]);return i}function x(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var b,v=!1,E={},w={},A=[],T={},_=[],P=!1,S={frameDuration:20,history:!0},M=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var N={hasJob:h,addJob:n,killJob:l,killAll:d,settings:c,getStats:m,isRunning:g,clearHistory:u,bind:t,unbind:i,version:"0.1.0"};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=N),exports.conrad=N):e.conrad=N}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var t=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var e,t,i={},r=arguments.length;for(e=r-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},t)},sigma.utils.id=function(){var e=0;return function(){return++e}}(),sigma.utils.floatColor=function(e){var t=[0,0,0];return e.match(/^#/)?(e=(e||"").replace(/^#/,""),t=3===e.length?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),t=[+e[1],+e[2],+e[3]]),256*t[0]*256+256*t[1]+t[2]},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(e){for(var t=0,i=0;e;)i+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:i,left:t}},sigma.utils.doubleClick=function(e,t,i){var r,s=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],r=e._doubleClickHandler[t],r.push(function(e){return s++,2===s?(s=0,i(e)):void(1===s&&setTimeout(function(){s=0},sigma.settings.doubleClickTimeout))}),e.addEventListener(t,r[r.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var i,r=(e._doubleClickHandler||{})[t]||[];i=r.pop();)e.removeEventListener(t,i);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.loadShader=function(e,t,i,r){var s,a=e.createShader(i);return e.shaderSource(a,t),e.compileShader(a),s=e.getShaderParameter(a,e.COMPILE_STATUS),s?a:(r&&r('Error compiling shader "'+a+'":'+e.getShaderInfoLog(a)),e.deleteShader(a),null)},sigma.utils.loadProgram=function(e,t,i,r,s){var a,o,n=e.createProgram();for(a=0;a<t.length;++a)e.attachShader(n,t[a]);if(i)for(a=0;a<i.length;++a)e.bindAttribLocation(n,locations?locations[a]:a,opt_attribs[a]);return e.linkProgram(n),o=e.getProgramParameter(n,e.LINK_STATUS),o?n:(s&&s("Error in program linking: "+e.getProgramInfoLog(n)),e.deleteProgram(n),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var i=Math.cos(e),r=Math.sin(e);return t?[i,-r,r,i]:[i,-r,0,r,i,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,i){var r=i?2:3,s=e[0*r+0],a=e[0*r+1],o=e[0*r+2],n=e[1*r+0],l=e[1*r+1],d=e[1*r+2],h=e[2*r+0],c=e[2*r+1],g=e[2*r+2],u=t[0*r+0],m=t[0*r+1],f=t[0*r+2],p=t[1*r+0],y=t[1*r+1],x=t[1*r+2],b=t[2*r+0],v=t[2*r+1],E=t[2*r+2];return i?[s*u+a*p,s*m+a*y,n*u+l*p,n*m+l*y]:[s*u+a*p+o*b,s*m+a*y+o*v,s*f+a*x+o*E,n*u+l*p+d*b,n*m+l*y+d*v,n*f+l*x+d*E,h*u+c*p+g*b,h*m+c*y+g*v,h*f+c*x+g*E]}}.call(this),function(){"use strict";var e,t=0,i=["ms","moz","webkit","o"];for(e=0;e<i.length&&!window.requestAnimationFrame;e++)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),s=window.setTimeout(function(){e(i+r)},r);return t=i+r,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,i,r=Array.prototype.slice.call(arguments,1),s=this;return t=function(){},i=function(){return s.apply(this instanceof t&&e?this:e,r.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,i.prototype=new t,i})}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var e={clone:!0,immutable:!0,verbose:!1,defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",drawLabels:!0,drawEdges:!0,drawNodes:!0,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},e)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var i,r,s,a;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(a="string"==typeof e?e.split(" "):e,i=0,r=a.length;i!==r;i+=1)s=a[i],s&&(this._handlers[s]||(this._handlers[s]=[]),this._handlers[s].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var i,r,s,a,o,n,l,d="string"==typeof e?e.split(" "):e;if(!arguments.length){for(o in this._handlers)delete this._handlers[o];return this}if(t)for(i=0,r=d.length;i!==r;i+=1){if(l=d[i],this._handlers[l]){for(n=[],s=0,a=this._handlers[l].length;s!==a;s+=1)this._handlers[l][s].handler!==t&&n.push(this._handlers[l][s]);this._handlers[l]=n}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(i=0,r=d.length;i!==r;i+=1)delete this._handlers[d[i]];return this},e.prototype.dispatchEvent=function(e,t){var i,r,s,a,o,n,l,d=this,h="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,i=0,r=h.length;i!==r;i+=1)if(l=h[i],this._handlers[l]){for(n=d.getEvent(l,t),o=[],s=0,a=this._handlers[l].length;s!==a;s+=1)this._handlers[l][s].handler(n),this._handlers[l][s].one||o.push(this._handlers[l][s]);this._handlers[l]=o}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,i){var r;for(r in e.prototype)e.prototype.hasOwnProperty(r)&&(t[r]=e.prototype[r]);e.apply(t,i)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,i,r={},s=Array.prototype.slice.call(arguments,0),a=function(e,o){var n,l;if(1===arguments.length&&"string"==typeof e){if(e in r&&void 0!==r[e])return r[e];for(t=0,i=s.length;i>t;t++)if(e in s[t]&&void 0!==s[t][e])return s[t][e];return void 0}if("object"==typeof e&&"string"==typeof o)return o in(e||{})?e[o]:a(o);n="object"==typeof e&&void 0===o?e:{},"string"==typeof e&&(n[e]=o);for(l in n)r[l]=n[l];return this};for(a.embedObjects=function(){var t=s.concat(r).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,i=arguments.length;i>t;t++)a(arguments[t]);return a};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.configurable=e):this.configurable=e}.call(this),function(){"use strict";function e(e,t,i){var r=function(){var r,s;s=i.apply(t,arguments);for(r in a[e])a[e][r].apply(t,arguments);return s};return r}function t(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}var i=Object.create(null),r=Object.create(null),s=Object.create(null),a=Object.create(null),o={immutable:!0,clone:!0},n=function(e){return o[e]},l=function(t){var r,a,o;o={settings:t||n,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(r in s)s[r].call(o);for(r in i)a=e(r,o,i[r]),this[r]=a,o[r]=a};l.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(i[e])throw'The method "'+e+'" already exists.';return i[e]=t,a[e]=Object.create(null),this},l.attach=function(e,t,i){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof i||3!==arguments.length)throw"attach: Wrong arguments.";var r;if("constructor"===e)r=s;else{if(!a[e])throw'The method "'+e+'" does not exist.';r=a[e]}if(r[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return r[t]=i,this},l.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(r[e])throw'The index "'+e+'" already exists.';var i;r[e]=t;for(i in t){if("function"!=typeof t[i])throw"The bindings must be functions.";l.attach(i,e,t[i])}return this},l.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id)throw"The node must have a string id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,i=e.id,r=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(r[t]=e[t]);else r=e;return this.settings("immutable")?Object.defineProperty(r,"id",{value:i,enumerable:!0}):r.id=i,this.inNeighborsIndex[i]=Object.create(null),this.outNeighborsIndex[i]=Object.create(null),this.allNeighborsIndex[i]=Object.create(null),this.inNeighborsCount[i]=0,this.outNeighborsCount[i]=0,this.allNeighborsCount[i]=0,this.nodesArray.push(r),this.nodesIndex[r.id]=r,this}),l.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id)throw"The edge must have a string id.";if("string"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,i=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(i[t]=e[t]);else i=e;return this.settings("immutable")?(Object.defineProperty(i,"id",{value:e.id,enumerable:!0}),Object.defineProperty(i,"source",{value:e.source,enumerable:!0}),Object.defineProperty(i,"target",{value:e.target,enumerable:!0})):(i.id=e.id,i.source=e.source,i.target=e.target),this.edgesArray.push(i),this.edgesIndex[i.id]=i,this.inNeighborsIndex[e.target][e.source]||(this.inNeighborsIndex[e.target][e.source]=Object.create(null)),this.inNeighborsIndex[e.target][e.source][e.id]=e,this.outNeighborsIndex[e.source][e.target]||(this.outNeighborsIndex[e.source][e.target]=Object.create(null)),this.outNeighborsIndex[e.source][e.target][e.id]=e,this.allNeighborsIndex[e.source][e.target]||(this.allNeighborsIndex[e.source][e.target]=Object.create(null)),this.allNeighborsIndex[e.source][e.target][e.id]=e,this.allNeighborsIndex[e.target][e.source]||(this.allNeighborsIndex[e.target][e.source]=Object.create(null)),this.allNeighborsIndex[e.target][e.source][e.id]=e,this.inNeighborsCount[e.target]++,this.outNeighborsCount[e.source]++,this.allNeighborsCount[e.target]++,this.allNeighborsCount[e.source]++,this}),l.addMethod("dropNode",function(e){if("string"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,i,r;for(delete this.nodesIndex[e],t=0,r=this.nodesArray.length;r>t;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)(this.edgesArray[t].source===e||this.edgesArray[t].target===e)&&this.dropEdge(this.edgesArray[t].id);delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e];for(i in this.nodesIndex)delete this.inNeighborsIndex[i][e],delete this.outNeighborsIndex[i][e],delete this.allNeighborsIndex[i][e];return this}),l.addMethod("dropEdge",function(e){if("string"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,i,r;for(r=this.edgesIndex[e],delete this.edgesIndex[e],t=0,i=this.edgesArray.length;i>t;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[r.target][r.source][r.id],Object.keys(this.inNeighborsIndex[r.target][r.source]).length||delete this.inNeighborsIndex[r.target][r.source],delete this.outNeighborsIndex[r.source][r.target][r.id],Object.keys(this.outNeighborsIndex[r.source][r.target]).length||delete this.outNeighborsIndex[r.source][r.target],delete this.allNeighborsIndex[r.source][r.target][r.id],Object.keys(this.allNeighborsIndex[r.source][r.target]).length||delete this.allNeighborsIndex[r.source][r.target],delete this.allNeighborsIndex[r.target][r.source][r.id],Object.keys(this.allNeighborsIndex[r.target][r.source]).length||delete this.allNeighborsIndex[r.target][r.source],this.inNeighborsCount[r.target]--,this.outNeighborsCount[r.source]--,this.allNeighborsCount[r.source]--,this.allNeighborsCount[r.target]--,this}),l.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),l.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,t(this.nodesIndex),t(this.edgesIndex),t(this.nodesIndex),t(this.inNeighborsIndex),t(this.outNeighborsIndex),t(this.allNeighborsIndex),t(this.inNeighborsCount),t(this.outNeighborsCount),t(this.allNeighborsCount),this}),l.addMethod("read",function(e){var t,i,r;for(i=e.nodes||[],t=0,r=i.length;r>t;t++)this.addNode(i[t]);for(i=e.edges||[],t=0,r=i.length;r>t;t++)this.addEdge(i[t]);return this}),l.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&"string"==typeof e)return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,r=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t])throw"nodes: Wrong arguments.";r.push(this.nodesIndex[e[t]])}return r}throw"nodes: Wrong arguments."}),l.addMethod("degree",function(e,t){if(t={"in":this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var i,r,s=[];for(i=0,r=e.length;r>i;i++){if("string"!=typeof e[i])throw"degree: Wrong arguments.";s.push(t[e[i]])}return s}throw"degree: Wrong arguments."}),l.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&"string"==typeof e)return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,r=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t])throw"edges: Wrong arguments.";r.push(this.edgesIndex[e[t]])}return r}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=l):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=l),exports.graph=l):this.graph=l}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,i,r){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof r&&r?i.embedObject(r):i},sigma.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var i,r,s=t||{},a=["x","y","ratio","angle"];for(i=0,r=a.length;r>i;i++)if(s[a[i]]!==e){if("number"!=typeof s[a[i]]||isNaN(s[a[i]]))throw'Value for "'+a[i]+'" is not a number.';this[a[i]]=s[a[i]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(t,i,r){r=r||{},i=i!==e?i:this.prefix,t=t!==e?t:this.readPrefix;var s,a,o,n=r.nodes||this.graph.nodes(),l=r.edges||this.graph.edges(),d=Math.cos(this.angle),h=Math.sin(this.angle);for(s=0,a=n.length;a>s;s++)o=n[s],o[i+"x"]=(((o[t+"x"]||0)-this.x)*d+((o[t+"y"]||0)-this.y)*h)/this.ratio+(r.width||0)/2,o[i+"y"]=(((o[t+"y"]||0)-this.y)*d-((o[t+"x"]||0)-this.x)*h)/this.ratio+(r.height||0)/2,o[i+"size"]=(o[t+"size"]||0)/Math.pow(this.ratio,this.settings("nodesPowRatio"));for(s=0,a=l.length;a>s;s++)l[s][i+"size"]=(l[s][t+"size"]||0)/Math.pow(this.ratio,this.settings("edgesPowRatio"));return this},sigma.classes.camera.prototype.graphPosition=function(e,t,i){var r=0,s=0,a=Math.cos(this.angle),o=Math.sin(this.angle);return i||(r=-(this.x*a+this.y*o)/this.ratio,s=-(this.y*a-this.x*o)/this.ratio),{x:(e*a+t*o)/this.ratio+r,y:(t*a-e*o)/this.ratio+s}},sigma.classes.camera.prototype.cameraPosition=function(e,t,i){var r=0,s=0,a=Math.cos(this.angle),o=Math.sin(this.angle);return i||(r=-(this.x*a+this.y*o)/this.ratio,s=-(this.y*a-this.x*o)/this.ratio),{x:((e-r)*a-(t-s)*o)*this.ratio,y:((t-s)*a+(e-r)*o)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),i=sigma.utils.matrices.translation(-this.x,-this.y),r=sigma.utils.matrices.multiply(i,sigma.utils.matrices.multiply(t,e));return r},sigma.classes.camera.prototype.getRectangle=function(e,t){var i=this.cameraPosition(e,0,!0),r=this.cameraPosition(0,t,!0),s=this.cameraPosition(e/2,t/2,!0),a=this.cameraPosition(e/4,0,!0).x,o=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-s.x-a,y1:this.y-s.y-o,x2:this.x-s.x+a+i.x,y2:this.y-s.y-o+i.y,height:Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y+2*o,2))}}}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,r=t.y+t.height/2,s=e.y<r,a=e.x<i;return s?a?0:1:a?2:3}function i(e,t){for(var i=[],r=0;4>r;r++)e.x2>=t[r][0].x&&e.x1<=t[r][1].x&&e.y1+e.height>=t[r][0].y&&e.y1<=t[r][2].y&&i.push(r);return i}function r(e,t){for(var i=[],r=0;4>r;r++)d.collision(e,t[r])&&i.push(r);return i}function s(e,t){var i,r,s=t.level+1,a=Math.round(t.bounds.width/2),o=Math.round(t.bounds.height/2),n=Math.round(t.bounds.x),d=Math.round(t.bounds.y);switch(e){case 0:i=n,r=d;break;case 1:i=n+a,r=d;break;case 2:i=n,r=d+o;break;case 3:i=n+a,r=d+o}return l({x:i,y:r,width:a,height:o},s,t.maxElements,t.maxLevel)}function a(t,r,o){if(o.level<o.maxLevel)for(var n=i(r,o.corners),l=0,d=n.length;d>l;l++)o.nodes[n[l]]===e&&(o.nodes[n[l]]=s(n[l],o)),a(t,r,o.nodes[n[l]]);else o.elements.push(t)}function o(i,r){if(r.level<r.maxLevel){var s=t(i,r.bounds);return r.nodes[s]!==e?o(i,r.nodes[s]):[]}return r.elements}function n(t,i,r,s){if(s=s||{},i.level<i.maxLevel)for(var a=r(t,i.corners),o=0,l=a.length;l>o;o++)i.nodes[a[o]]!==e&&n(t,i.nodes[a[o]],r,s);else for(var d=0,h=i.elements.length;h>d;d++)s[i.elements[d].id]===e&&(s[i.elements[d].id]=i.elements[d]);return s}function l(e,t,i,r){return{level:t||0,bounds:e,corners:d.splitSquare(e),maxElements:i||20,maxLevel:r||4,elements:[],nodes:[]}}var d={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}
},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var r=[],s=[],a=0;4>a;a++){var o=this.projection(t[a],e),n=this.projection(i[a],e);r.push(o.x*e.x+o.y*e.y),s.push(n.x*e.x+n.y*e.y)}var l=Math.max.apply(Math,r),d=Math.max.apply(Math,s),h=Math.min.apply(Math,r),c=Math.min.apply(Math,s);return l>=c&&d>=h},collision:function(e,t){for(var i=this.axis(e,t),r=!0,s=0;4>s;s++)r*=this.axisCollision(i[s],e,t);return!!r}},h=function(){this._geom=d,this._tree=null,this._cache={query:!1,result:!1}};h.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var i=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var r=0,s=e.length;s>r;r++)a(e[r],d.pointToSquare({x:e[r][i+"x"],y:e[r][i+"y"],size:e[r][i+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},h.prototype.point=function(e,t){return this._tree?o({x:e,y:t},this._tree)||[]:[]},h.prototype.area=function(e){var t,s,a=JSON.stringify(e);if(this._cache.query===a)return this._cache.result;d.isAxisAligned(e)?(t=i,s=d.axisAlignedTopPoints(e)):(t=r,s=d.rectangleCorners(e));var o=this._tree?n(s,this._tree,t):[],l=[];for(var h in o)l.push(o[h]);return this._cache.query=a,this._cache.result=l,l},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=h):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.quad=h):this.quad=h}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){function r(e){var t,i,r;return w("mouseEnabled")&&b.dispatchEvent("mousemove",{x:sigma.utils.getX(e)-e.target.width/2,y:sigma.utils.getY(e)-e.target.height/2}),w("mouseEnabled")&&p?(y=!0,x&&clearTimeout(x),x=setTimeout(function(){y=!1},w("dragTimeout")),sigma.misc.animation.killAll(E),E.isMoving=!0,r=E.cameraPosition(sigma.utils.getX(e)-m,sigma.utils.getY(e)-f,!0),t=h-r.x,i=c-r.y,(t!==E.x||i!==E.y)&&(g=E.x,u=E.y,E.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function s(e){if(w("mouseEnabled")&&p){p=!1,x&&clearTimeout(x),E.isMoving=!1;var t=sigma.utils.getX(e),i=sigma.utils.getY(e);y?(sigma.misc.animation.killAll(E),sigma.misc.animation.camera(E,{x:E.x+w("mouseInertiaRatio")*(E.x-g),y:E.y+w("mouseInertiaRatio")*(E.y-u)},{easing:"quadraticOut",duration:w("mouseInertiaDuration")})):(m!==t||f!==i)&&E.goTo({x:E.x,y:E.y}),b.dispatchEvent("mouseup",{x:t-e.target.width/2,y:i-e.target.height/2}),y=!1}}function a(e){w("mouseEnabled")&&(p=!0,h=E.x,c=E.y,g=E.x,u=E.y,m=sigma.utils.getX(e),f=sigma.utils.getY(e),b.dispatchEvent("mouseup",{x:m-e.target.width/2,y:f-e.target.height/2}))}function o(){w("mouseEnabled")&&b.dispatchEvent("mouseout")}function n(e){return w("mouseEnabled")&&b.dispatchEvent("click",{x:sigma.utils.getX(e)-e.target.width/2,y:sigma.utils.getY(e)-e.target.height/2}),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function l(e){var t,i,r,s;return w("mouseEnabled")?(r=1/w("doubleClickZoomingRatio"),s=Math.max(w("zoomMin"),Math.min(w("zoomMax"),E.ratio*r)),r=s/E.ratio,b.dispatchEvent("doubleclick",{x:m-e.target.width/2,y:f-e.target.height/2}),w("doubleClickEnabled")&&s!==E.ratio&&(i=sigma.misc.animation.killAll(E),t=E.cameraPosition(sigma.utils.getX(e)-e.target.width/2,sigma.utils.getY(e)-e.target.height/2,!0),sigma.misc.animation.camera(E,{x:t.x*(1-r)+E.x,y:t.y*(1-r)+E.y,ratio:s},{easing:i?"quadraticOut":"quadraticInOut",duration:w("doubleClickZoomDuration")})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function d(e){var t,i,r,s;return w("mouseEnabled")?(r=sigma.utils.getDelta(e)>0?1/w("zoomingRatio"):w("zoomingRatio"),s=Math.max(w("zoomMin"),Math.min(w("zoomMax"),E.ratio*r)),r=s/E.ratio,s!==E.ratio&&(i=sigma.misc.animation.killAll(E),t=E.cameraPosition(sigma.utils.getX(e)-e.target.width/2,sigma.utils.getY(e)-e.target.height/2,!0),sigma.misc.animation.camera(E,{x:t.x*(1-r)+E.x,y:t.y*(1-r)+E.y,ratio:s},{easing:i?"quadraticOut":"quadraticInOut",duration:w("mouseZoomDuration")})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var h,c,g,u,m,f,p,y,x,b=this,v=e,E=t,w=i;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(v,"click",l),v.addEventListener("DOMMouseScroll",d,!1),v.addEventListener("mousewheel",d,!1),v.addEventListener("mousemove",r,!1),v.addEventListener("mousedown",a,!1),v.addEventListener("click",n,!1),v.addEventListener("mouseout",o,!1),document.addEventListener("mouseup",s,!1),this.kill=function(){sigma.utils.unbindDoubleClick(v,"click"),v.removeEventListener("DOMMouseScroll",d),v.removeEventListener("mousewheel",d),v.removeEventListener("mousemove",r),v.removeEventListener("mousedown",a),v.removeEventListener("click",n),v.removeEventListener("mouseout",o),document.removeEventListener("mouseup",s)}}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,i){function r(e){var t=sigma.utils.getOffset(S);return{x:e.pageX-t.left,y:e.pageY-t.top}}function s(e){if(N("touchEnabled")){var t,i,s,a,o,n;switch(R=e.touches,R.length){case 1:M.isMoving=!0,w=1,l=M.x,d=M.y,g=M.x,u=M.y,o=r(R[0]),p=o.x,y=o.y;break;case 2:return M.isMoving=!0,w=2,o=r(R[0]),n=r(R[1]),t=o.x,s=o.y,i=n.x,a=n.y,g=M.x,u=M.y,h=M.angle,c=M.ratio,l=M.x,d=M.y,p=t,y=s,x=i,b=a,v=Math.atan2(b-y,x-p),E=Math.sqrt(Math.pow(b-y,2)+Math.pow(x-p,2)),e.preventDefault(),!1}}}function a(e){if(N("touchEnabled")){R=e.touches;var t=N("touchInertiaRatio");switch(_&&(A=!1,clearTimeout(_)),w){case 2:if(1===e.touches.length){s(e),e.preventDefault();break}case 1:M.isMoving=!1,P.dispatchEvent("stopDrag"),A&&(T=!1,sigma.misc.animation.camera(M,{x:M.x+t*(M.x-g),y:M.y+t*(M.y-u)},{easing:"quadraticOut",duration:N("touchInertiaDuration")})),A=!1,w=0}}}function o(e){if(!T&&N("touchEnabled")){var t,i,s,a,o,n,S,C,I,k,O,L,F,j,z,B,U;switch(R=e.touches,A=!0,_&&clearTimeout(_),_=setTimeout(function(){A=!1},N("dragTimeout")),w){case 1:C=r(R[0]),t=C.x,s=C.y,k=M.cameraPosition(t-p,s-y,!0),j=l-k.x,z=d-k.y,(j!==M.x||z!==M.y)&&(g=M.x,u=M.y,M.goTo({x:j,y:z}),P.dispatchEvent("mousemove",{x:C.x-e.target.width/2,y:C.y-e.target.height/2}),P.dispatchEvent("drag"));break;case 2:C=r(R[0]),I=r(R[1]),t=C.x,s=C.y,i=I.x,a=I.y,O=M.cameraPosition((p+x)/2-e.target.width/2,(y+b)/2-e.target.height/2,!0),S=M.cameraPosition((t+i)/2-e.target.width/2,(s+a)/2-e.target.height/2,!0),L=Math.atan2(a-s,i-t)-v,F=Math.sqrt(Math.pow(a-s,2)+Math.pow(i-t,2))/E,t=O.x,s=O.y,B=c/F,t*=F,s*=F,U=h-L,o=Math.cos(-L),n=Math.sin(-L),i=t*o+s*n,a=s*o-t*n,t=i,s=a,j=t-S.x+l,z=s-S.y+d,(B!==M.ratio||U!==M.angle||j!==M.x||z!==M.y)&&(g=M.x,u=M.y,m=M.angle,f=M.ratio,M.goTo({x:j,y:z,angle:U,ratio:B}),P.dispatchEvent("drag"))}return e.preventDefault(),!1}}function n(e){var t,i,s,a;return e.touches&&1===e.touches.length&&N("touchEnabled")?(T=!0,s=1/N("doubleClickZoomingRatio"),a=Math.max(N("zoomMin"),Math.min(N("zoomMax"),M.ratio*s)),s=a/M.ratio,t=r(e.touches[0]),P.dispatchEvent("doubleclick",{x:t.x-e.target.width/2,y:t.y-e.target.height/2}),N("doubleClickEnabled")&&a!==M.ratio&&(i=sigma.misc.animation.killAll(M),t=M.cameraPosition(t.x-e.target.width/2,t.y-e.target.height/2,!0),sigma.misc.animation.camera(M,{x:t.x*(1-s)+M.x,y:t.y*(1-s)+M.y,ratio:a},{easing:i?"quadraticOut":"quadraticInOut",duration:N("doubleClickZoomDuration"),onComplete:function(){T=!1}})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var l,d,h,c,g,u,m,f,p,y,x,b,v,E,w,A,T,_,P=this,S=e,M=t,N=i,R=[];sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(S,"touchstart",n),S.addEventListener("touchstart",s,!1),S.addEventListener("touchend",a,!1),S.addEventListener("touchcancel",a,!1),S.addEventListener("touchleave",a,!1),S.addEventListener("touchmove",o,!1),this.kill=function(){sigma.utils.unbindDoubleClick(S,"touchstart"),S.addEventListener("touchstart",s),S.addEventListener("touchend",a),S.addEventListener("touchcancel",a),S.addEventListener("touchleave",a),S.addEventListener("touchmove",o)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,i,r){if("object"!=typeof r)throw"sigma.renderers.canvas: Wrong arguments.";if(!(r.container instanceof HTMLElement))throw"Container not found.";var s,a,o,n;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=r,this.container=this.options.container,this.settings="object"==typeof r.settings&&r.settings?i.embedObjects(r.settings):i,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],s=0,a=o.length;a>s;s++)n="function"==typeof o[s]?o[s]:sigma.captors[o[s]],this.captors.push(new n(this.domElements.mouse,this.camera,this.settings));window.addEventListener("resize",this.boundResize=this.resize.bind(this),!1),sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(t){t=t||{};var i,r,s,a,o,n,l,d,h,c,g,u,m={},f=this.graph,p=this.graph.nodes,y=(this.options.prefix||"",this.settings(t,"drawEdges")),x=this.settings(t,"drawNodes"),b=this.settings(t,"drawLabels"),v=this.settings.embedObjects(t,{prefix:this.options.prefix});this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(y=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(s in this.jobs)conrad.hasJob(s)&&conrad.killJob(s);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,r=0,a=i.length;a>r;r++)m[i[r].id]=i[r];if(y){for(i=f.edges(),r=0,a=i.length;a>r;r++)o=i[r],!m[o.source]&&!m[o.target]||o.hidden||p(o.source).hidden||p(o.target).hidden||this.edgesOnScreen.push(o);if(this.settings(t,"batchEdgesDrawing"))n="edges_"+this.conradId,u=v("canvasEdgesBatchSize"),c=this.edgesOnScreen,a=c.length,h=0,l=Math.min(c.length,h+u),d=function(){for(g=sigma.canvas.edges,r=h;l>r;r++)o=c[r],(g[o.type]||g.def)(o,f.nodes(o.source),f.nodes(o.target),this.contexts.edges,v);return l===c.length?(delete this.jobs[n],!1):(h=l+1,l=Math.min(c.length,h+u),!0)},this.jobs[n]=d,conrad.addJob(n,d.bind(this));else for(g=sigma.canvas.edges,i=this.edgesOnScreen,r=0,a=i.length;a>r;r++)o=i[r],(g[o.type]||g.def)(o,f.nodes(o.source),f.nodes(o.target),this.contexts.edges,v)}if(x)for(g=sigma.canvas.nodes,i=this.nodesOnScreen,r=0,a=i.length;a>r;r++)i[r].hidden||(g[i[r].type]||g.def)(i[r],this.contexts.nodes,v);if(b)for(g=sigma.canvas.labels,i=this.nodesOnScreen,r=0,a=i.length;a>r;r++)i[r].hidden||(g[i[r].type]||g.def)(i[r],this.contexts.labels,v);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var i=document.createElement(e);i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,i){var r,s=this.width,a=this.height,o=1;if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),s!==this.width||a!==this.height)for(r in this.domElements)this.domElements[r].style.width=t+"px",this.domElements[r].style.height=i+"px","canvas"===this.domElements[r].tagName.toLowerCase()&&(this.domElements[r].setAttribute("width",t*o+"px"),this.domElements[r].setAttribute("height",i*o+"px"),1!==o&&this.contexts[r].scale(o,o));return this},sigma.renderers.canvas.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this},sigma.renderers.canvas.prototype.kill=function(){var e,t;for(window.removeEventListener("resize",this.boundResize);t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,i,r){if("object"!=typeof r)throw"sigma.renderers.webgl: Wrong arguments.";if(!(r.container instanceof HTMLElement))throw"Container not found.";var s,a,o,n;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=r,this.container=this.options.container,this.settings="object"==typeof r.settings&&r.settings?i.embedObjects(r.settings):i,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),this.settings(r,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],s=0,a=o.length;a>s;s++)n="function"==typeof o[s]?o[s]:sigma.captors[o[s]],this.captors.push(new n(this.domElements.mouse,this.camera,this.settings));window.addEventListener("resize",this.boundResize=this.resize.bind(this),!1),sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,i,r,s,a=this.graph,o=sigma.utils.extend(o,this.options);for(r in this.nodeFloatArrays)delete this.nodeFloatArrays[r];for(r in this.edgeFloatArrays)delete this.edgeFloatArrays[r];for(e=a.edges(),t=0,i=e.length;i>t;t++)r=e[t].type&&sigma.webgl.edges[e[t].type]?e[t].type:"def",this.edgeFloatArrays[r]||(this.edgeFloatArrays[r]={edges:[]}),this.edgeFloatArrays[r].edges.push(e[t]);for(e=a.nodes(),t=0,i=e.length;i>t;t++)r=e[t].type&&sigma.webgl.nodes[e[t].type]?r:"def",this.nodeFloatArrays[r]||(this.nodeFloatArrays[r]={nodes:[]}),this.nodeFloatArrays[r].nodes.push(e[t]);for(r in this.edgeFloatArrays)for(s=sigma.webgl.edges[r],e=this.edgeFloatArrays[r].edges,t=0,i=e.length;i>t;t++)this.edgeFloatArrays[r].array||(this.edgeFloatArrays[r].array=new Float32Array(e.length*s.POINTS*s.ATTRIBUTES)),e[t].hidden||a.nodes(e[t].source).hidden||a.nodes(e[t].target).hidden||s.addEdge(e[t],a.nodes(e[t].source),a.nodes(e[t].target),this.edgeFloatArrays[r].array,t*s.POINTS*s.ATTRIBUTES,o.prefix,this.settings);for(r in this.nodeFloatArrays)for(s=sigma.webgl.nodes[r],e=this.nodeFloatArrays[r].nodes,t=0,i=e.length;i>t;t++)this.nodeFloatArrays[r].array||(this.nodeFloatArrays[r].array=new Float32Array(e.length*s.POINTS*s.ATTRIBUTES)),e[t].hidden||s.addNode(e[t],this.nodeFloatArrays[r].array,t*s.POINTS*s.ATTRIBUTES,o.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(t){var i,r,s,a,o,n,l=this,d=(this.graph,this.contexts.nodes),h=this.contexts.edges,c=this.camera.getMatrix(),g=sigma.utils.extend(t,this.options),u=this.settings(g,"drawLabels"),m=this.settings(g,"drawEdges"),f=this.settings(g,"drawNodes");this.settings(g,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(m=!1),this.clear(),c=sigma.utils.matrices.multiply(c,sigma.utils.matrices.translation(this.width/2,this.height/2));for(a in this.jobs)conrad.hasJob(a)&&conrad.killJob(a);if(m)if(this.settings(g,"batchEdgesDrawing"))(function(){var e,t,i,r,s,a,o,n,l;i="edges_"+this.conradId,l=this.settings(g,"webglEdgesBatchSize"),e=Object.keys(this.edgeFloatArrays),e.length&&(t=0,n=sigma.webgl.edges[e[t]],s=this.edgeFloatArrays[e[t]].array,o=0,a=Math.min(o+l*n.POINTS,s.length/n.ATTRIBUTES),r=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=n.initProgram(h)),a>o&&(h.useProgram(this.edgePrograms[e[t]]),n.render(h,this.edgePrograms[e[t]],s,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings("webglOversamplingRatio"),start:o,count:a-o})),a>=s.length/n.ATTRIBUTES&&t===e.length-1?(delete this.jobs[i],!1):(a>=s.length/n.ATTRIBUTES?(t++,s=this.edgeFloatArrays[e[t]].array,n=sigma.webgl.edges[e[t]],o=0,a=Math.min(o+l*n.POINTS,s.length/n.ATTRIBUTES)):(o=a,a=Math.min(o+l*n.POINTS,s.length/n.ATTRIBUTES)),!0)},this.jobs[i]=r,conrad.addJob(i,r.bind(this)))}).call(this);else for(a in this.edgeFloatArrays)n=sigma.webgl.edges[a],this.edgePrograms[a]||(this.edgePrograms[a]=n.initProgram(h)),this.edgeFloatArrays[a]&&(h.useProgram(this.edgePrograms[a]),n.render(h,this.edgePrograms[a],this.edgeFloatArrays[a].array,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings("webglOversamplingRatio")}));if(f){d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),d.enable(d.BLEND);for(a in this.nodeFloatArrays)n=sigma.webgl.nodes[a],this.nodePrograms[a]||(this.nodePrograms[a]=n.initProgram(d)),this.nodeFloatArrays[a]&&(d.useProgram(this.nodePrograms[a]),n.render(d,this.nodePrograms[a],this.nodeFloatArrays[a].array,{settings:this.settings,matrix:c,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings("webglOversamplingRatio")}))}if(u)for(i=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:i,edges:[],width:this.width,height:this.height}),o=function(e){return l.settings({prefix:l.camera.prefix},e)},r=0,s=i.length;s>r;r++)i[r].hidden||(sigma.canvas.labels[i[r].type]||sigma.canvas.labels.def)(i[r],this.contexts.labels,o);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,i){var r=document.createElement(e);r.style.position="absolute",r.setAttribute("class","sigma-"+t),this.domElements[t]=r,this.container.appendChild(r),"canvas"===e.toLowerCase()&&(this.contexts[t]=r.getContext(i?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}))},sigma.renderers.webgl.prototype.resize=function(t,i){var r,s=this.width,a=this.height;if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),s!==this.width||a!==this.height)for(r in this.domElements)this.domElements[r].style.width=t+"px",this.domElements[r].style.height=i+"px","canvas"===this.domElements[r].tagName.toLowerCase()&&(this.contexts[r]&&this.contexts[r].scale?(this.domElements[r].setAttribute("width",t+"px"),this.domElements[r].setAttribute("height",i+"px")):(this.domElements[r].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[r].setAttribute("height",i*this.settings("webglOversamplingRatio")+"px")));for(r in this.contexts)this.contexts[r]&&this.contexts[r].viewport&&this.contexts[r].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){var e,t;for(window.removeEventListener("resize",this.boundResize);t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var e,t=!!window.WebGLRenderingContext;t&&(e=document.createElement("canvas"),t=!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))),sigma.renderers.def=t?sigma.renderers.webgl:sigma.renderers.canvas}.call(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,i,r,s){var a=sigma.utils.floatColor(e.color||s("defaultNodeColor"));t[i++]=e[r+"x"],t[i++]=e[r+"y"],t[i++]=e[r+"size"],t[i++]=a,t[i++]=0,t[i++]=e[r+"x"],t[i++]=e[r+"y"],t[i++]=e[r+"size"],t[i++]=a,t[i++]=2*Math.PI/3,t[i++]=e[r+"x"],t[i++]=e[r+"y"],t[i++]=e[r+"size"],t[i++]=a,t[i++]=4*Math.PI/3},render:function(e,t,i,r){var s,a=e.getAttribLocation(t,"a_position"),o=e.getAttribLocation(t,"a_size"),n=e.getAttribLocation(t,"a_color"),l=e.getAttribLocation(t,"a_angle"),d=e.getUniformLocation(t,"u_resolution"),h=e.getUniformLocation(t,"u_matrix"),c=e.getUniformLocation(t,"u_ratio"),g=e.getUniformLocation(t,"u_scale");s=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(d,r.width,r.height),e.uniform1f(c,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(g,r.scalingRatio),e.uniformMatrix3fv(h,!1,r.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,i,r,s){t[i++]=e[r+"x"],t[i++]=e[r+"y"],t[i++]=e[r+"size"],t[i++]=sigma.utils.floatColor(e.color||s("defaultNodeColor"))},render:function(e,t,i,r){var s,a=e.getAttribLocation(t,"a_position"),o=e.getAttribLocation(t,"a_size"),n=e.getAttribLocation(t,"a_color"),l=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_ratio"),c=e.getUniformLocation(t,"u_scale");s=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(l,r.width,r.height),e.uniform1f(h,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),e.uniform1f(c,r.scalingRatio),e.uniformMatrix3fv(d,!1,r.matrix),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,i,r,s,a,o){var n=(e[a+"size"]||1)/2,l=t[a+"x"],d=t[a+"y"],h=i[a+"x"],c=i[a+"y"],g=e.color;if(!g)switch(o("edgeColor")){case"source":g=t.color||o("defaultNodeColor");break;case"target":g=i.color||o("defaultNodeColor");break;default:g=o("defaultEdgeColor")}g=sigma.utils.floatColor(g),r[s++]=l,r[s++]=d,r[s++]=h,r[s++]=c,r[s++]=n,r[s++]=0,r[s++]=g,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=1,r[s++]=g,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=0,r[s++]=g,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=0,r[s++]=g,r[s++]=l,r[s++]=d,r[s++]=h,r[s++]=c,r[s++]=n,r[s++]=1,r[s++]=g,r[s++]=l,r[s++]=d,r[s++]=h,r[s++]=c,r[s++]=n,r[s++]=0,r[s++]=g},render:function(e,t,i,r){var s,a=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position1"),n=e.getAttribLocation(t,"a_position2"),l=e.getAttribLocation(t,"a_thickness"),d=e.getAttribLocation(t,"a_minus"),h=e.getUniformLocation(t,"u_resolution"),c=e.getUniformLocation(t,"u_matrix"),g=e.getUniformLocation(t,"u_matrixHalfPi"),u=e.getUniformLocation(t,"u_matrixHalfPiMinus"),m=e.getUniformLocation(t,"u_ratio"),f=e.getUniformLocation(t,"u_scale");s=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(h,r.width,r.height),e.uniform1f(m,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(f,r.scalingRatio),e.uniformMatrix3fv(c,!1,r.matrix),e.uniformMatrix2fv(g,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(u,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(n,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,i,r,s,a,o){var n=((e[a+"size"]||1)/2,t[a+"x"]),l=t[a+"y"],d=i[a+"x"],h=i[a+"y"],c=e.color;if(!c)switch(o("edgeColor")){case"source":c=t.color||o("defaultNodeColor");break;case"target":c=i.color||o("defaultNodeColor");break;default:c=o("defaultEdgeColor")}c=sigma.utils.floatColor(c),r[s++]=n,r[s++]=l,r[s++]=c,r[s++]=d,r[s++]=h,r[s++]=c},render:function(e,t,i,r){var s,a=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position"),n=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix");s=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(n,r.width,r.height),e.uniformMatrix3fv(l,!1,r.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,i])
}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,i,r,s,a,o){var n=(e[a+"size"]||1)/2,l=t[a+"x"],d=t[a+"y"],h=i[a+"x"],c=i[a+"y"],g=i[a+"size"],u=e.color;if(!u)switch(o("edgeColor")){case"source":u=t.color||o("defaultNodeColor");break;case"target":u=i.color||o("defaultNodeColor");break;default:u=o("defaultEdgeColor")}u=sigma.utils.floatColor(u),r[s++]=l,r[s++]=d,r[s++]=h,r[s++]=c,r[s++]=n,r[s++]=g,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=u,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=g,r[s++]=1,r[s++]=1,r[s++]=0,r[s++]=0,r[s++]=u,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=g,r[s++]=1,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=u,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=g,r[s++]=1,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=u,r[s++]=l,r[s++]=d,r[s++]=h,r[s++]=c,r[s++]=n,r[s++]=g,r[s++]=0,r[s++]=1,r[s++]=0,r[s++]=0,r[s++]=u,r[s++]=l,r[s++]=d,r[s++]=h,r[s++]=c,r[s++]=n,r[s++]=g,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=u,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=g,r[s++]=1,r[s++]=0,r[s++]=1,r[s++]=-1,r[s++]=u,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=g,r[s++]=1,r[s++]=0,r[s++]=1,r[s++]=0,r[s++]=u,r[s++]=h,r[s++]=c,r[s++]=l,r[s++]=d,r[s++]=n,r[s++]=g,r[s++]=1,r[s++]=0,r[s++]=1,r[s++]=1,r[s++]=u},render:function(e,t,i,r){var s,a=e.getAttribLocation(t,"a_pos1"),o=e.getAttribLocation(t,"a_pos2"),n=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_tSize"),d=e.getAttribLocation(t,"a_delay"),h=e.getAttribLocation(t,"a_minus"),c=e.getAttribLocation(t,"a_head"),g=e.getAttribLocation(t,"a_headPosition"),u=e.getAttribLocation(t,"a_color"),m=e.getUniformLocation(t,"u_resolution"),f=e.getUniformLocation(t,"u_matrix"),p=e.getUniformLocation(t,"u_matrixHalfPi"),y=e.getUniformLocation(t,"u_matrixHalfPiMinus"),x=e.getUniformLocation(t,"u_ratio"),b=e.getUniformLocation(t,"u_nodeRatio"),v=e.getUniformLocation(t,"u_arrowHead"),E=e.getUniformLocation(t,"u_scale");s=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(m,r.width,r.height),e.uniform1f(x,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),e.uniform1f(b,Math.pow(r.ratio,r.settings("nodesPowRatio"))/r.ratio),e.uniform1f(v,5),e.uniform1f(E,r.scalingRatio),e.uniformMatrix3fv(f,!1,r.matrix),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(y,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(a),e.enableVertexAttribArray(o),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.enableVertexAttribArray(h),e.enableVertexAttribArray(c),e.enableVertexAttribArray(g),e.enableVertexAttribArray(u),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(u,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t,i,r;return t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER),r=sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,i){var r,s=i("prefix")||"",a=e[s+"size"];a<i("labelThreshold")||"string"==typeof e.label&&(r="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*a,t.font=(i("fontStyle")?i("fontStyle")+" ":"")+r+"px "+i("font"),t.fillStyle="node"===i("labelColor")?e.color||i("defaultNodeColor"):i("defaultLabelColor"),t.fillText(e.label,Math.round(e[s+"x"]+a+3),Math.round(e[s+"y"]+r/3)))}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,i){var r,s,a,o,n,l=i("hoverFontStyle")||i("fontStyle"),d=i("prefix")||"",h=e[d+"size"],c="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*h;t.font=(l?l+" ":"")+c+"px "+(i("hoverFont")||i("font")),t.beginPath(),t.fillStyle="node"===i("labelHoverBGColor")?e.color||i("defaultNodeColor"):i("defaultHoverLabelBGColor"),i("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=i("labelHoverShadowColor")),"string"==typeof e.label&&(r=Math.round(e[d+"x"]-c/2-2),s=Math.round(e[d+"y"]-c/2-2),a=Math.round(t.measureText(e.label).width+c/2+h+7),o=Math.round(c+4),n=Math.round(c/2+2),t.moveTo(r,s+n),t.arcTo(r,s,r+n,s,n),t.lineTo(r+a,s),t.lineTo(r+a,s+o),t.lineTo(r+n,s+o),t.arcTo(r,s+o,r,s+o-n,n),t.lineTo(r,s+n),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),i("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===i("nodeBorderColor")?e.color||i("defaultNodeColor"):i("defaultNodeBorderColor"),t.arc(e[d+"x"],e[d+"y"],h+i("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill());var g=sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def;g(e,t,i),"string"==typeof e.label&&(t.fillStyle="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[d+"x"]+h+3),Math.round(e[d+"y"]+c/3)))}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,i){var r=i("prefix")||"";t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(e[r+"x"],e[r+"y"],e[r+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,i,r,s){var a=e.color,o=s("prefix")||"",n=s("edgeColor"),l=s("defaultNodeColor"),d=s("defaultEdgeColor");if(!a)switch(n){case"source":a=t.color||l;break;case"target":a=i.color||l;break;default:a=d}r.strokeStyle=a,r.lineWidth=e[o+"size"]||1,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.lineTo(i[o+"x"],i[o+"y"]),r.stroke(),s("drawEdgeLabels")&&sigma.canvas.labels.edges.def(e,t,i,r,s)}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,i,r,s){var a=e.color,o=s("prefix")||"",n=s("edgeColor"),l=s("defaultNodeColor"),d=s("defaultEdgeColor");if(!a)switch(n){case"source":a=t.color||l;break;case"target":a=i.color||l;break;default:a=d}r.strokeStyle=a,r.lineWidth=e[o+"size"]||1,r.beginPath(),r.moveTo(t[o+"x"],t[o+"y"]),r.quadraticCurveTo((t[o+"x"]+i[o+"x"])/2+(i[o+"y"]-t[o+"y"])/4,(t[o+"y"]+i[o+"y"])/2+(t[o+"x"]-i[o+"x"])/4,i[o+"x"],i[o+"y"]),r.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,i,r,s){var a=e.color,o=s("prefix")||"",n=s("edgeColor"),l=s("defaultNodeColor"),d=s("defaultEdgeColor"),h=e[o+"size"]||1,c=i[o+"size"],g=t[o+"x"],u=t[o+"y"],m=i[o+"x"],f=i[o+"y"],p=2.5*h,y=Math.sqrt(Math.pow(m-g,2)+Math.pow(f-u,2)),x=g+(m-g)*(y-p-c)/y,b=u+(f-u)*(y-p-c)/y,v=(m-g)*p/y,E=(f-u)*p/y;if(!a)switch(n){case"source":a=t.color||l;break;case"target":a=i.color||l;break;default:a=d}r.strokeStyle=a,r.lineWidth=h,r.beginPath(),r.moveTo(g,u),r.lineTo(x,b),r.stroke(),r.fillStyle=a,r.beginPath(),r.moveTo(x+v,b+E),r.lineTo(x+.6*E,b-.6*v),r.lineTo(x-.6*E,b+.6*v),r.lineTo(x+v,b+E),r.closePath(),r.fill(),s("drawEdgeLabels")&&sigma.canvas.labels.edges.def(e,t,i,r,s)}}(),function(){"use strict";var e=sigma.utils.pkg("sigma.canvas.edges");e.curvedArrow=function(e,t,i,r,s){var a=e.color,o=s("prefix")||"",n=s("edgeColor"),l=s("defaultNodeColor"),d=s("defaultEdgeColor"),h=e[o+"size"]||1,c=i[o+"size"],g=t[o+"x"],u=t[o+"y"],m=(t[o+"x"]+i[o+"x"])/2+(i[o+"y"]-t[o+"y"])/4,f=(t[o+"y"]+i[o+"y"])/2+(t[o+"x"]-i[o+"x"])/4,p=i[o+"x"],y=i[o+"y"],x=2.5*h,b=Math.sqrt(Math.pow(p-m,2)+Math.pow(y-f,2)),v=m+(p-m)*(b-x-c)/b,E=f+(y-f)*(b-x-c)/b,w=(p-m)*x/b,A=(y-f)*x/b;if(!a)switch(n){case"source":a=t.color||l;break;case"target":a=i.color||l;break;default:a=d}r.strokeStyle=a,r.lineWidth=h,r.beginPath(),r.moveTo(g,u),r.quadraticCurveTo(m,f,v,E),r.stroke(),r.fillStyle=a,r.beginPath(),r.moveTo(v+w,E+A),r.lineTo(v+.6*A,E-.6*w),r.lineTo(v-.6*A,E+.6*w),r.lineTo(v+w,E+A),r.closePath(),r.fill()}}(),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,i){var r,s,a,o,n,l,d,h,c=this.graph.nodes(),g=this.graph.edges(),u=this.settings.embedObjects(i||{}),m=u("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),f=m.minX,p=m.minY,y=m.maxX,x=m.maxY,b=m.sizeMax,v=m.weightMax,E=u("width")||1,w=u("height")||1;for(d="outside"===u("scalingMode")?Math.max(E/Math.max(y-f,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-f,1),w/Math.max(x-p,1)),h=(u("rescaleIgnoreSize")?0:(u("maxNodeSize")||b)/d)+(u("sideMargin")||0),y+=h,f-=h,x+=h,p-=h,d="outside"===u("scalingMode")?Math.max(E/Math.max(y-f,1),w/Math.max(x-p,1)):Math.min(E/Math.max(y-f,1),w/Math.max(x-p,1)),u("maxNodeSize")||u("minNodeSize")?u("maxNodeSize")===u("minNodeSize")?(a=0,o=u("maxNodeSize")):(a=(u("maxNodeSize")-u("minNodeSize"))/b,o=u("minNodeSize")):(a=1,o=0),u("maxEdgeSize")||u("minEdgeSize")?u("maxEdgeSize")===u("minEdgeSize")?(n=0,l=u("minEdgeSize")):(n=(u("maxEdgeSize")-u("minEdgeSize"))/v,l=u("minEdgeSize")):(n=1,l=0),r=0,s=g.length;s>r;r++)g[r][t+"size"]=g[r][e+"size"]*n+l;for(r=0,s=c.length;s>r;r++)c[r][t+"size"]=c[r][e+"size"]*a+o,c[r][t+"x"]=(c[r][e+"x"]-(y+f)/2)*d,c[r][t+"y"]=(c[r][e+"y"]-(x+p)/2)*d},sigma.utils.getBoundaries=function(e,t,i){var r,s,a=e.edges(),o=e.nodes(),n=-1/0,l=-1/0,d=1/0,h=1/0,c=-1/0,g=-1/0;if(i)for(r=0,s=a.length;s>r;r++)n=Math.max(a[r][t+"size"],n);for(r=0,s=o.length;s>r;r++)l=Math.max(o[r][t+"size"],l),c=Math.max(o[r][t+"x"],c),d=Math.min(o[r][t+"x"],d),g=Math.max(o[r][t+"y"],g),h=Math.min(o[r][t+"y"],h);return n=n||1,l=l||1,{weightMax:n,sizeMax:l,minX:d,minY:h,maxX:c,maxY:g}}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var i,r,s;if(t+""!=e+""){for(s=this.graph.nodes(),i=0,r=s.length;r>i;i++)s[i][t+"x"]=s[i][e+"x"],s[i][t+"y"]=s[i][e+"y"],s[i][t+"size"]=s[i][e+"size"];for(s=this.graph.edges(),i=0,r=s.length;r>i;i++)s[i][t+"size"]=s[i][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();sigma.misc.animation.camera=function(i,r,s){if(!(i instanceof sigma.classes.camera&&"object"==typeof r&&r))throw"animation.camera: Wrong arguments.";if("number"!=typeof r.x&&"number"!=typeof r.y&&"number"!=typeof r.ratio&&"number"!=typeof r.angle)throw"There must be at least one valid coordinate in the given val.";var a,o,n,l,d,h,c=s||{},g=sigma.utils.dateNow();return h={x:i.x,y:i.y,ratio:i.ratio,angle:i.angle},d=c.duration,l="function"!=typeof c.easing?sigma.utils.easings[c.easing||"quadraticInOut"]:c.easing,a=function(){var t,s=c.duration?(sigma.utils.dateNow()-g)/c.duration:1;s>=1?(i.isAnimated=!1,i.goTo({x:r.x!==e?r.x:h.x,y:r.y!==e?r.y:h.y,ratio:r.ratio!==e?r.ratio:h.ratio,angle:r.angle!==e?r.angle:h.angle}),cancelAnimationFrame(o),delete sigma.misc.animation.running[o],"function"==typeof c.onComplete&&c.onComplete()):(t=l(s),i.isAnimated=!0,i.goTo({x:r.x!==e?h.x+(r.x-h.x)*t:h.x,y:r.y!==e?h.y+(r.y-h.y)*t:h.y,ratio:r.ratio!==e?h.ratio+(r.ratio-h.ratio)*t:h.ratio,angle:r.angle!==e?h.angle+(r.angle-h.angle)*t:h.angle}),"function"==typeof c.onNewFrame&&c.onNewFrame(),n.frameId=requestAnimationFrame(a))},o=t(),n={frameId:requestAnimationFrame(a),target:i,type:"camera",options:c,fn:a},sigma.misc.animation.running[o]=n,o},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,i,r=0,s="string"==typeof e?e:null,a="object"==typeof e?e:null,o=sigma.misc.animation.running;for(i in o)s&&o[i].type!==s||a&&o[i].target!==a||(t=sigma.misc.animation.running[i],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[i],"camera"===t.type&&(t.target.isAnimated=!1),r++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return r},sigma.misc.animation.has=function(e){var t,i="string"==typeof e?e:null,r="object"==typeof e?e:null,s=sigma.misc.animation.running;for(t in s)if(!(i&&s[t].type!==i||r&&s[t].target!==r))return!0;return!1}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(e){function t(t){t&&(a="x"in t.data?t.data.x:a,o="y"in t.data?t.data.y:o);var i,r,s,l,d,h,c,g,u=[],m=a+n.width/2,f=o+n.height/2,p=n.camera.cameraPosition(a,o),y=n.camera.quadtree.point(p.x,p.y);if(y.length)for(i=0,s=y.length;s>i;i++)if(l=y[i],d=l[e+"x"],h=l[e+"y"],c=l[e+"size"],!l.hidden&&m>d-c&&d+c>m&&f>h-c&&h+c>f&&Math.sqrt(Math.pow(m-d,2)+Math.pow(f-h,2))<c){for(g=!1,r=0;r<u.length;r++)if(l.size>u[r].size){u.splice(r,0,l),g=!0;break}g||u.push(l)}return u}function i(e){function i(e){n.settings("eventsEnabled")&&(n.dispatchEvent("click",e.data),o=t(e),o.length?(n.dispatchEvent("clickNode",{node:o[0]}),n.dispatchEvent("clickNodes",{node:o})):n.dispatchEvent("clickStage"))}function r(e){n.settings("eventsEnabled")&&(n.dispatchEvent("doubleClick",e.data),o=t(e),o.length?(n.dispatchEvent("doubleClickNode",{node:o[0]}),n.dispatchEvent("doubleClickNodes",{node:o})):n.dispatchEvent("doubleClickStage"))}function s(){if(n.settings("eventsEnabled")){var e,t,i,r=[];for(e in l)r.push(l[e]);for(l={},t=0,i=r.length;i>t;t++)n.dispatchEvent("outNode",{node:r[t]});r.length&&n.dispatchEvent("outNodes",{nodes:r})}}function a(e){if(n.settings("eventsEnabled")){o=t(e);var i,r,s,a=[],d=[],h={},c=o.length;for(i=0;c>i;i++)s=o[i],h[s.id]=s,l[s.id]||(d.push(s),l[s.id]=s);for(r in l)h[r]||(a.push(l[r]),delete l[r]);for(i=0,c=d.length;c>i;i++)n.dispatchEvent("overNode",{node:d[i]});for(i=0,c=a.length;c>i;i++)n.dispatchEvent("outNode",{node:a[i]});d.length&&n.dispatchEvent("overNodes",{nodes:d}),a.length&&n.dispatchEvent("outNodes",{nodes:a})}}var o,l={};e.bind("click",i),e.bind("mouseup",a),e.bind("mousemove",a),e.bind("mouseout",s),e.bind("doubleclick",r),n.bind("render",a)}var r,s,a,o,n=this;for(r=0,s=this.captors.length;s>r;r++)i(this.captors[r])}}.call(this),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(e){function t(){i.contexts.hover.canvas.width=i.contexts.hover.canvas.width;var t,s=sigma.canvas.hovers,a=i.settings.embedObjects({prefix:e});if(a("enableHovering"))for(t in r)r[t].hidden||(s[r[t].type]||s.def)(r[t],i.contexts.hover,a)}var i=this,r={};this.bind("overNodes",function(e){var i,s=e.data.nodes,a=s.length;for(i=0;a>i;i++)r[s[i].id]=s[i];t()}),this.bind("outNodes",function(e){var i,s=e.data.nodes,a=s.length;for(i=0;a>i;i++)delete r[s[i].id];t()}),this.bind("render",function(){t()})}}.call(this);