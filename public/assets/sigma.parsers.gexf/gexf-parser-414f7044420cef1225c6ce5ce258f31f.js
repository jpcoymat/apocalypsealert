(function(e){"use strict";function t(e){var t={id:e.id,label:e.label};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function r(e){var t={id:e.id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1};return e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t}function n(e){function n(){var e={};return d.els.meta?(e.lastmodifieddate=d.els.meta.getAttribute("lastmodifieddate"),u.nodeListEach(d.els.meta.childNodes,function(t){e[t.tagName.toLowerCase()]=t.textContent}),e):e}function i(e){var t=[];return d.els.model[e]&&u.nodeListEach(d.els.model[e],function(e){var r={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},n=u.nodeListToArray(e.childNodes);n.length>0&&(r.defaultValue=n[0].textContent),t.push(r)}),t.length>0?t:!1}function a(e,t){var r={},n=t.getElementsByTagName("attvalue"),i=u.nodeListToHash(n,function(e){var t=u.namedNodeMapToObject(e.attributes),r=t.id||t["for"];return{key:r,value:t.value}});return e.map(function(e){var t=e.title.toLowerCase();r[t]=!(e.id in i)&&"defaultValue"in e?u.enforceType(e.type,e.defaultValue):u.enforceType(e.type,i[e.id])}),r}function o(e){var r=[];return u.nodeListEach(d.els.nodes,function(n){var i={id:n.getAttribute("id"),label:n.getAttribute("label")||""};e&&(i.attributes=a(e,n)),d.hasViz&&(i.viz=s(n)),r.push(t(i))}),r}function s(e){var t={},r=u.getFirstElementByTagNS(e,"viz","color");if(r){var n=["r","g","b","a"].map(function(e){return r.getAttribute(e)});t.color=u.getRGB(n)}var i=u.getFirstElementByTagNS(e,"viz","position");i&&(t.position={},["x","y","z"].map(function(e){t.position[e]=+i.getAttribute(e)}));var a=u.getFirstElementByTagNS(e,"viz","size");a&&(t.size=+a.getAttribute("value"));var o=u.getFirstElementByTagNS(e,"viz","shape");return o&&(t.shape=o.getAttribute("value")),t}function l(e,t){var n=[];return u.nodeListEach(d.els.edges,function(i){var o=u.namedNodeMapToObject(i.attributes);"type"in o||(o.type=t),e&&(o.attributes=a(e,i)),d.hasViz&&(o.viz=g(i)),n.push(r(o))}),n}function g(e){var t={},r=u.getFirstElementByTagNS(e,"viz","color");if(r){var n=["r","g","b","a"].map(function(e){return r.getAttribute(e)});t.color=u.getRGB(n)}var i=u.getFirstElementByTagNS(e,"viz","shape");i&&(t.shape=i.getAttribute("value"));var a=u.getFirstElementByTagNS(e,"viz","thickness");return a&&(t.thickness=+a.getAttribute("value")),t}var d={};d.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:u.getModelTags(e)},d.hasViz=!!u.getAttributeNS(d.els.root,"xmlns","viz"),d.version=d.els.root.getAttribute("version")||"1.0",d.mode=d.els.graph.getAttribute("mode")||"static";var c=d.els.graph.getAttribute("defaultedgetype");d.defaultEdgetype=c||"undirected";var f=i("node"),v=i("edge"),m={version:d.version,mode:d.mode,defaultEdgeType:d.defaultEdgetype,meta:n(),model:{},nodes:o(f),edges:l(v,d.defaultEdgetype)};return f&&(m.model.node=f),v&&(m.model.edge=v),m}function i(e,t){var r=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(r){}}return null}();if(!r)throw"XMLHttpRequest not supported, cannot load the file.";var n,i="function"==typeof t;return r.overrideMimeType?(r.overrideMimeType("text/xml"),n=function(e){return e.responseXML}):n=function(e){var t=new DOMParser;return t.parseFromString(e.responseText,"application/xml")},r.open("GET",e,i),i&&(r.onreadystatechange=function(){4===r.readyState&&t(n(r))}),r.send(),i?r:n(r)}function a(e){return n(e)}function o(e,t){return"function"==typeof t?i(e,function(e){t(n(e))}):n(i(e))}var u={getModelTags:function(e){var t,r=e.getElementsByTagName("attributes"),n={},i=r.length;for(t=0;i>t;t++)n[r[t].getAttribute("class")]=r[t].childNodes;return n},nodeListToArray:function(e){for(var t=[],r=0,n=e.length;n>r;++r)"#text"!==e[r].nodeName&&t.push(e[r]);return t},nodeListEach:function(e,t){for(var r=0,n=e.length;n>r;++r)"#text"!==e[r].nodeName&&t(e[r])},nodeListToHash:function(e,t){for(var r={},n=0;n<e.length;n++)if("#text"!==e[n].nodeName){var i=t(e[n]);r[i.key]=i.value}return r},namedNodeMapToObject:function(e){for(var t={},r=0;r<e.length;r++)t[e[r].name]=e[r].value;return t},getFirstElementByTagNS:function(e,t,r){var n=e.getElementsByTagName(t+":"+r)[0];return n||(n=e.getElementsByTagNameNS(t,r)[0]),n||(n=e.getElementsByTagName(r)[0]),n},getAttributeNS:function(t,r,n){var i=t.getAttribute(r+":"+n);return i===e&&(i=t.getAttributeNS(r,n)),i===e&&(i=t.getAttribute(n)),i},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};if("undefined"!=typeof this.gexf)throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:a,fetch:o,version:"0.1.1"},"undefined"!=typeof exports&&this.exports!==exports&&(module.exports=this.gexf)}).call(this);